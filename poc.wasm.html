<html>
  <head><title>Casein Proof-of-Concept</title></head>
  <body>
    <script type="text/javascript" src="out/wasm/poc.js"></script>
    <script type="text/javascript">
      var exp;

      function repaint() {
        exp.casein_repaint();
        window.requestAnimationFrame(repaint);
      }
      function start(exports) {
        document.addEventListener('keydown', (e) => exports.casein_keycode_down(e.keyCode));
        document.addEventListener('keyup', (e) => exports.casein_keycode_up(e.keyCode));

        exp = exports;
        exp.casein_create_window();
        window.requestAnimationFrame(repaint);
        console.log("started");
      }

      (function() {
        ecow({ base_dir: "out/wasm" }).then(obj => {
          obj.start();
          start(obj.exports);
        });
      })();
    </script>
  </body>
</html>
